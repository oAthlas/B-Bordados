<!DOCTYPE html>
<html lang="pt-br">
<head>
    {% load static %}
    {% load cart_total %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B Bordados</title>
    <link rel="stylesheet" href="{% static 'home/inicial.css' %}">
</head>
<body>
    <!-- Cabeçario da pagina em header -->
    <header class="cabeçario">
    
        <a href="{% url 'home' %}"><img src="{% static 'home/logo_bbordados.svg' %}" alt="" class="logo"></a>
         
            
            <input type="text" 
            name="pesquisar" 
            id="pesquisar" 
            placeholder="Pesquisar" 
            class="pesquisa">

            <button class="lupa">
                <img src="https://img.icons8.com/?size=100&id=e4NkZ7kWAD7f&format=png&color=000000" 
                alt="" 
                class="lupaimg">
            </button> 
    <div class="direita">
            <button id="openmodal">
            <img src="https://img.icons8.com/?size=100&id=59997&format=png&color=000000" 
            alt="" style="padding-top: 7px;" 
            width="40px"; 
            height="37px"; 
            class="carrinho" >
            </button>

           
            <img src="https://img.icons8.com/?size=100&id=8113&format=png&color=000000" 
            alt=""  
            class="menu">
            </div>  

    </header>


    <div class="slider">

        <div class="slides">
            <input type="radio" name="radio-bnt" id="radio1">
            <input type="radio" name="radio-bnt" id="radio2">
            <input type="radio" name="radio-bnt" id="radio3">
            <input type="radio" name="radio-bnt" id="radio4">
            
            <div class="slide first">
                <img src="https://blog.saninternet.com/wp-content/uploads/2017/11/san-banner-successo-1.jpg" 
                alt="imagem 1"/>
            </div>

            {% for banner in banner %}
            <div class="slide">
                <img src="{{ banner.image.url }}" 
                alt="{{ banner.title }}"/>
            </div>
            {% endfor %}
    
            <div class="navigation-auto">
                <div class="auto-bnt1"></div>
                <div class="auto-bnt2"></div>
                <div class="auto-bnt3"></div>
                <div class="auto-bnt4"></div>
            </div>
        </div>

        <div class="manual-navigation">
            <label for="radio1" class="manual-bnt"></label>
            <label for="radio2" class="manual-bnt"></label>
            <label for="radio3" class="manual-bnt"></label>
            <label for="radio4" class="manual-bnt"></label>
        </div>


    </div>
            <!-- texto, centro da página -->
    <h1 class="texto"> Produtos Em Destaque </h1>

            <!-- Botões de filtro -->
    <div class="filtro">
            
        <a href="?sort=price_asc"><button>Mais baratos</button></a>
        <a href="?sort=price_desc"><button>Mais caros</button></a>
        <a href="?sort=newest"><button>Novos</button></a>
        <a href="?sort=name_asc"><button>A-Z</button></a>
        
    </div>      
            <!-- arquivos de venda -->
      
        <div class="produtos">
    {% for product in products %}
    <div class="produto">
        <a href="{% url 'product_show' product.id %}">
            <img src="{{ product.image.url }}" alt="{{ product.name }}">
        </a>

        <p class="nome">{{ product.name }}</p>
        <p class="preco">R${{ product.price }}</p>
        <p class="parcela"><strong>{{ product.installments_count }}</strong>X DE <strong>R${{ product.installments_value }}</strong></p>
    </div>
    {% endfor %}

    
</div>

<!-- Modal -->
<div class="modal" id="modal">
    <div>
        {% if user.is_authenticated %}
            
            <h2>Seu Carrinho</h2>

            {% if cart %}
                <ul>
                    {% for id, item in cart.items %}
                        <li>
                            <img src="{{ item.image }}" alt="{{ item.name }}">
                            <div>
                                <p>{{ item.name }}</p>
                                <p>R$ {{ item.price|floatformat:2 }}</p>
                            </div>
                        </li>
                    {% endfor %}
                </ul>

                <!-- Total -->
                <p>Total: R$ {{ cart.values|cart_total|floatformat:2 }}</p>

            {% else %}
                <p>Seu carrinho está vazio.</p>
            {% endif %}

        {% else %}
            <!-- Usuário NÃO logado -->
            <p>Você precisa estar logado para usar o carrinho.</p>
            <a href="{% url 'login' %}">Fazer Login</a>
        {% endif %}
    </div>
</div>
<script src="{% static 'home/Script.js' %}"></script>
</body>
</html>